<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Сбор комментариев с видео YouTube</title>
    <style>
        #loading {
            display: none;
            font-style: italic;
            color: #555;
            margin-top: 10px;
        }
    </style>
    <script>
        function showLoading() {
            document.getElementById("loading").style.display = "inline";
        }
    </script>
</head>
<body>
    <h2>Сбор комментариев с видео YouTube</h2>

    <form method="post" onsubmit="showLoading()">
        <input type="text" name="video_url" placeholder="https://www.youtube.com/watch?v=..." required style="width: 400px;"><br><br>
        <select name="period">
            <option value="day">Последний день</option>
            <option value="week">Последняя неделя</option>
            <option value="month" selected>Последний месяц</option>
        </select><br><br>
        <button type="submit">Собрать комментарии</button>
        <span id="loading">⏳ Загрузка...</span>
    </form>

    {% if error %}
        <p style="color: red;">Ошибка: {{ error }}</p>
    {% endif %}

    {% if comments %}
        <h3>Результаты ({{ comments|length }}):</h3>
        <ul>
        {% for c in comments %}
            <li><strong>{{ c.author }}</strong>: {{ c.text }} <em>({{ c.date }})</em></li>
        {% endfor %}
        </ul>
    {% endif %}
</body>
</html>
